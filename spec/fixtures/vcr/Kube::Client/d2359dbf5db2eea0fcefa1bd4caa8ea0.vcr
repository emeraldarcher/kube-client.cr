HTTP/1.1 200 OK
Content-Type: application/json
Date: Wed, 10 Apr 2019 13:13:36 GMT
Connection: close
Transfer-Encoding: chunked
Content-Length: 23577

{"kind":"PodList","apiVersion":"v1","metadata":{"selfLink":"/api/v1/namespaces/default/pods","resourceVersion":"456322"},"items":[{"metadata":{"name":"mysqlha-2qs72","generateName":"mysqlha-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/mysqlha-2qs72","uid":"2d053efb-5b91-11e9-bf08-00505683ad44","resourceVersion":"455328","creationTimestamp":"2019-04-10T13:04:29Z","labels":{"app":"mysqlha","app.kubernetes.io/component":"database","app.kubernetes.io/instance":"mysqlha","app.kubernetes.io/managed-by":"Tiller","app.kubernetes.io/name":"mysqlha","app.kubernetes.io/part-of":"spoved-platform","app.kubernetes.io/version":"5.7.25","chart":"mysqlha-0.1.0","component":"server","controller-revision-hash":"3205749636","helm.sh/chart":"mysqlha-0.1.0","heritage":"Tiller","pod-template-generation":"1","release":"mysqlha"},"annotations":{"cni.projectcalico.org/podIP":"10.42.1.45/32"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"DaemonSet","name":"mysqlha","uid":"2cb2c446-5b91-11e9-afcc-005056831f87","controller":true,"blockOwnerDeletion":true}]},"spec":{"volumes":[{"name":"data","hostPath":{"path":"/var/lib/mysql","type":""}},{"name":"conf","hostPath":{"path":"/etc/mysql/conf.d","type":""}},{"name":"config-map","configMap":{"name":"mysqlha","defaultMode":420}},{"name":"scripts","configMap":{"name":"mysqlha-scripts","defaultMode":420}},{"name":"default-token-gwws6","secret":{"secretName":"default-token-gwws6","defaultMode":420}}],"initContainers":[{"name":"consul-registry","image":"consul:1.3.1","command":["/bin/sh"],"args":["-c","source /mnt/scripts/mysqlha_lib.sh;\n\ncheck_if_slave\n\n# If host is a slave and the master is dead, will register as new master\nif [ ${i_am_the_highlander} == 0 ] \u0026\u0026 [ ${master_alive} == 0 ]; then\n  echo \"I am a slave AND master is dead\"\n  echo \"Long live the new master: ${HOSTNAME}\"\n  register_as_master\nfi\n"],"env":[{"name":"CONSUL_DC","value":"optx"},{"name":"CONSUL_HTTP_ADDR","value":"consul-server.default.svc.cluster.local:8500"},{"name":"CONSUL_HTTP_SSL_VERIFY","value":"false"}],"resources":{},"volumeMounts":[{"name":"conf","mountPath":"/mnt/conf.d"},{"name":"config-map","mountPath":"/mnt/config-map"},{"name":"scripts","mountPath":"/mnt/scripts"},{"name":"default-token-gwws6","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"},{"name":"init-mysql","image":"consul:1.3.1","command":["/bin/sh"],"args":["-c","set -ex\n# Copy all cnf files\ncp -f /mnt/config-map/* /mnt/conf.d/\n\n# Copy server-id.conf adding offset to avoid reserved server-id=0 value.\ncat /mnt/config-map/server-id.cnf | sed s/@@SERVER_ID@@/1/g \u003e /mnt/conf.d/server-id.cnf\n\n# TODO: Determine master/slave. Will remove slave for now\nrm /mnt/conf.d/slave.cnf\n\n# # Copy appropriate conf.d files from config-map to config mount.\n# if [[ $ordinal -eq 0 ]]; then\n#   cp -f /mnt/config-map/master.cnf /mnt/conf.d/\n# else\n#   cp -f /mnt/config-map/slave.cnf /mnt/conf.d/\n# fi\n#\n# # Copy replication user script\n# if [[ $ordinal -eq 0 ]]; then\n#   cp -f /mnt/config-map/create-replication-user.sh /mnt/scripts/create-replication-user.sh\n#   chmod 700 /mnt/scripts/create-replication-user.sh\n# fi\n\n# Set user to 999 (percona mysql user)\nchown -R 999:999 /mnt/conf.d /mnt/data\n"],"resources":{},"volumeMounts":[{"name":"conf","mountPath":"/mnt/conf.d"},{"name":"config-map","mountPath":"/mnt/config-map"},{"name":"scripts","mountPath":"/mnt/scripts"},{"name":"data","mountPath":"/mnt/data"},{"name":"default-token-gwws6","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"containers":[{"name":"mysql","image":"percona:5.7.25","ports":[{"name":"mysql","containerPort":3306,"protocol":"TCP"}],"env":[{"name":"MYSQL_DATABASE"},{"name":"MYSQL_ROOT_PASSWORD","valueFrom":{"secretKeyRef":{"name":"mysqlha","key":"mysql-root-password"}}},{"name":"MYSQL_REPLICATION_USER","value":"repl"},{"name":"MYSQL_REPLICATION_PASSWORD","valueFrom":{"secretKeyRef":{"name":"mysqlha","key":"mysql-replication-password"}}},{"name":"MYSQL_USER","value":"spoved"},{"name":"MYSQL_PASSWORD","valueFrom":{"secretKeyRef":{"name":"mysqlha","key":"mysql-password"}}}],"resources":{"requests":{"cpu":"100m","memory":"128Mi"}},"volumeMounts":[{"name":"data","mountPath":"/var/lib/mysql"},{"name":"conf","mountPath":"/etc/my.cnf.d"},{"name":"scripts","mountPath":"/mnt/scripts"},{"name":"default-token-gwws6","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/bin/sh","-c","mysqladmin ping -h 127.0.0.1 -u root -p\"${MYSQL_ROOT_PASSWORD}\""]},"initialDelaySeconds":30,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"exec":{"command":["/bin/sh","-c","mysql -h 127.0.0.1 -u root -p\"${MYSQL_ROOT_PASSWORD}\" -e \"SELECT 1\""]},"initialDelaySeconds":10,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"172.16.30.198","securityContext":{},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute"},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute"},{"key":"node.kubernetes.io/disk-pressure","operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/memory-pressure","operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/unschedulable","operator":"Exists","effect":"NoSchedule"}],"priority":0},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-04-10T13:04:37Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-04-10T13:04:54Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":null},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-04-10T13:04:29Z"}],"hostIP":"172.16.30.198","podIP":"10.42.1.45","startTime":"2019-04-10T13:04:29Z","initContainerStatuses":[{"name":"consul-registry","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2019-04-10T13:04:30Z","finishedAt":"2019-04-10T13:04:36Z","containerID":"docker://a1f846f283f5e630fc24fceeabfa9840d916af005a89de73d40840653778c17b"}},"lastState":{},"ready":true,"restartCount":0,"image":"consul:1.3.1","imageID":"docker-pullable://consul@sha256:a633ef291439c1d86bf822cfa208f4b6484dfd8518189ed8b4a0b59c4ba96903","containerID":"docker://a1f846f283f5e630fc24fceeabfa9840d916af005a89de73d40840653778c17b"},{"name":"init-mysql","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2019-04-10T13:04:37Z","finishedAt":"2019-04-10T13:04:37Z","containerID":"docker://81535cc50f4ff6703a98bad24dfc475b1d5ceed245fe6a60ac4e6534b3f59e57"}},"lastState":{},"ready":true,"restartCount":0,"image":"consul:1.3.1","imageID":"docker-pullable://consul@sha256:a633ef291439c1d86bf822cfa208f4b6484dfd8518189ed8b4a0b59c4ba96903","containerID":"docker://81535cc50f4ff6703a98bad24dfc475b1d5ceed245fe6a60ac4e6534b3f59e57"}],"containerStatuses":[{"name":"mysql","state":{"running":{"startedAt":"2019-04-10T13:04:38Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"percona:5.7.25","imageID":"docker-pullable://percona@sha256:3a5b2e2f52b444ac4449e469b957348a8953b5b372bd15e1c740eb5e8c01177b","containerID":"docker://384e3de4bd7c8b14d231ffc64616e135e3a1e50164bce865bc1da6fa6852a63e"}],"qosClass":"Burstable"}},{"metadata":{"name":"mysqlha-qp2bc","generateName":"mysqlha-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/mysqlha-qp2bc","uid":"2d064760-5b91-11e9-bf08-00505683ad44","resourceVersion":"455338","creationTimestamp":"2019-04-10T13:04:29Z","labels":{"app":"mysqlha","app.kubernetes.io/component":"database","app.kubernetes.io/instance":"mysqlha","app.kubernetes.io/managed-by":"Tiller","app.kubernetes.io/name":"mysqlha","app.kubernetes.io/part-of":"spoved-platform","app.kubernetes.io/version":"5.7.25","chart":"mysqlha-0.1.0","component":"server","controller-revision-hash":"3205749636","helm.sh/chart":"mysqlha-0.1.0","heritage":"Tiller","pod-template-generation":"1","release":"mysqlha"},"annotations":{"cni.projectcalico.org/podIP":"10.42.2.54/32"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"DaemonSet","name":"mysqlha","uid":"2cb2c446-5b91-11e9-afcc-005056831f87","controller":true,"blockOwnerDeletion":true}]},"spec":{"volumes":[{"name":"data","hostPath":{"path":"/var/lib/mysql","type":""}},{"name":"conf","hostPath":{"path":"/etc/mysql/conf.d","type":""}},{"name":"config-map","configMap":{"name":"mysqlha","defaultMode":420}},{"name":"scripts","configMap":{"name":"mysqlha-scripts","defaultMode":420}},{"name":"default-token-gwws6","secret":{"secretName":"default-token-gwws6","defaultMode":420}}],"initContainers":[{"name":"consul-registry","image":"consul:1.3.1","command":["/bin/sh"],"args":["-c","source /mnt/scripts/mysqlha_lib.sh;\n\ncheck_if_slave\n\n# If host is a slave and the master is dead, will register as new master\nif [ ${i_am_the_highlander} == 0 ] \u0026\u0026 [ ${master_alive} == 0 ]; then\n  echo \"I am a slave AND master is dead\"\n  echo \"Long live the new master: ${HOSTNAME}\"\n  register_as_master\nfi\n"],"env":[{"name":"CONSUL_DC","value":"optx"},{"name":"CONSUL_HTTP_ADDR","value":"consul-server.default.svc.cluster.local:8500"},{"name":"CONSUL_HTTP_SSL_VERIFY","value":"false"}],"resources":{},"volumeMounts":[{"name":"conf","mountPath":"/mnt/conf.d"},{"name":"config-map","mountPath":"/mnt/config-map"},{"name":"scripts","mountPath":"/mnt/scripts"},{"name":"default-token-gwws6","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"},{"name":"init-mysql","image":"consul:1.3.1","command":["/bin/sh"],"args":["-c","set -ex\n# Copy all cnf files\ncp -f /mnt/config-map/* /mnt/conf.d/\n\n# Copy server-id.conf adding offset to avoid reserved server-id=0 value.\ncat /mnt/config-map/server-id.cnf | sed s/@@SERVER_ID@@/1/g \u003e /mnt/conf.d/server-id.cnf\n\n# TODO: Determine master/slave. Will remove slave for now\nrm /mnt/conf.d/slave.cnf\n\n# # Copy appropriate conf.d files from config-map to config mount.\n# if [[ $ordinal -eq 0 ]]; then\n#   cp -f /mnt/config-map/master.cnf /mnt/conf.d/\n# else\n#   cp -f /mnt/config-map/slave.cnf /mnt/conf.d/\n# fi\n#\n# # Copy replication user script\n# if [[ $ordinal -eq 0 ]]; then\n#   cp -f /mnt/config-map/create-replication-user.sh /mnt/scripts/create-replication-user.sh\n#   chmod 700 /mnt/scripts/create-replication-user.sh\n# fi\n\n# Set user to 999 (percona mysql user)\nchown -R 999:999 /mnt/conf.d /mnt/data\n"],"resources":{},"volumeMounts":[{"name":"conf","mountPath":"/mnt/conf.d"},{"name":"config-map","mountPath":"/mnt/config-map"},{"name":"scripts","mountPath":"/mnt/scripts"},{"name":"data","mountPath":"/mnt/data"},{"name":"default-token-gwws6","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"containers":[{"name":"mysql","image":"percona:5.7.25","ports":[{"name":"mysql","containerPort":3306,"protocol":"TCP"}],"env":[{"name":"MYSQL_DATABASE"},{"name":"MYSQL_ROOT_PASSWORD","valueFrom":{"secretKeyRef":{"name":"mysqlha","key":"mysql-root-password"}}},{"name":"MYSQL_REPLICATION_USER","value":"repl"},{"name":"MYSQL_REPLICATION_PASSWORD","valueFrom":{"secretKeyRef":{"name":"mysqlha","key":"mysql-replication-password"}}},{"name":"MYSQL_USER","value":"spoved"},{"name":"MYSQL_PASSWORD","valueFrom":{"secretKeyRef":{"name":"mysqlha","key":"mysql-password"}}}],"resources":{"requests":{"cpu":"100m","memory":"128Mi"}},"volumeMounts":[{"name":"data","mountPath":"/var/lib/mysql"},{"name":"conf","mountPath":"/etc/my.cnf.d"},{"name":"scripts","mountPath":"/mnt/scripts"},{"name":"default-token-gwws6","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/bin/sh","-c","mysqladmin ping -h 127.0.0.1 -u root -p\"${MYSQL_ROOT_PASSWORD}\""]},"initialDelaySeconds":30,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"exec":{"command":["/bin/sh","-c","mysql -h 127.0.0.1 -u root -p\"${MYSQL_ROOT_PASSWORD}\" -e \"SELECT 1\""]},"initialDelaySeconds":10,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"172.16.30.195","securityContext":{},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute"},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute"},{"key":"node.kubernetes.io/disk-pressure","operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/memory-pressure","operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/unschedulable","operator":"Exists","effect":"NoSchedule"}],"priority":0},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-04-10T13:04:38Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-04-10T13:04:59Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":null},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-04-10T13:04:29Z"}],"hostIP":"172.16.30.195","podIP":"10.42.2.54","startTime":"2019-04-10T13:04:29Z","initContainerStatuses":[{"name":"consul-registry","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2019-04-10T13:04:31Z","finishedAt":"2019-04-10T13:04:36Z","containerID":"docker://c4011ee23a789f28acea63e2854ede7b92d6011cf4f1ab6580f08e4be72f3203"}},"lastState":{},"ready":true,"restartCount":0,"image":"consul:1.3.1","imageID":"docker-pullable://consul@sha256:a633ef291439c1d86bf822cfa208f4b6484dfd8518189ed8b4a0b59c4ba96903","containerID":"docker://c4011ee23a789f28acea63e2854ede7b92d6011cf4f1ab6580f08e4be72f3203"},{"name":"init-mysql","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2019-04-10T13:04:37Z","finishedAt":"2019-04-10T13:04:37Z","containerID":"docker://5374d3e8b193d00ed2faffc7d708417c6533271d73d41722e29a2327c2e0a634"}},"lastState":{},"ready":true,"restartCount":0,"image":"consul:1.3.1","imageID":"docker-pullable://consul@sha256:a633ef291439c1d86bf822cfa208f4b6484dfd8518189ed8b4a0b59c4ba96903","containerID":"docker://5374d3e8b193d00ed2faffc7d708417c6533271d73d41722e29a2327c2e0a634"}],"containerStatuses":[{"name":"mysql","state":{"running":{"startedAt":"2019-04-10T13:04:38Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"percona:5.7.25","imageID":"docker-pullable://percona@sha256:3a5b2e2f52b444ac4449e469b957348a8953b5b372bd15e1c740eb5e8c01177b","containerID":"docker://daee87b5d023a918d688ef890a74316926138a5c5d60614b968deb56c4797e57"}],"qosClass":"Burstable"}},{"metadata":{"name":"mysqlha-z7vjp","generateName":"mysqlha-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/mysqlha-z7vjp","uid":"2cfefc98-5b91-11e9-bf08-00505683ad44","resourceVersion":"455335","creationTimestamp":"2019-04-10T13:04:29Z","labels":{"app":"mysqlha","app.kubernetes.io/component":"database","app.kubernetes.io/instance":"mysqlha","app.kubernetes.io/managed-by":"Tiller","app.kubernetes.io/name":"mysqlha","app.kubernetes.io/part-of":"spoved-platform","app.kubernetes.io/version":"5.7.25","chart":"mysqlha-0.1.0","component":"server","controller-revision-hash":"3205749636","helm.sh/chart":"mysqlha-0.1.0","heritage":"Tiller","pod-template-generation":"1","release":"mysqlha"},"annotations":{"cni.projectcalico.org/podIP":"10.42.0.47/32"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"DaemonSet","name":"mysqlha","uid":"2cb2c446-5b91-11e9-afcc-005056831f87","controller":true,"blockOwnerDeletion":true}]},"spec":{"volumes":[{"name":"data","hostPath":{"path":"/var/lib/mysql","type":""}},{"name":"conf","hostPath":{"path":"/etc/mysql/conf.d","type":""}},{"name":"config-map","configMap":{"name":"mysqlha","defaultMode":420}},{"name":"scripts","configMap":{"name":"mysqlha-scripts","defaultMode":420}},{"name":"default-token-gwws6","secret":{"secretName":"default-token-gwws6","defaultMode":420}}],"initContainers":[{"name":"consul-registry","image":"consul:1.3.1","command":["/bin/sh"],"args":["-c","source /mnt/scripts/mysqlha_lib.sh;\n\ncheck_if_slave\n\n# If host is a slave and the master is dead, will register as new master\nif [ ${i_am_the_highlander} == 0 ] \u0026\u0026 [ ${master_alive} == 0 ]; then\n  echo \"I am a slave AND master is dead\"\n  echo \"Long live the new master: ${HOSTNAME}\"\n  register_as_master\nfi\n"],"env":[{"name":"CONSUL_DC","value":"optx"},{"name":"CONSUL_HTTP_ADDR","value":"consul-server.default.svc.cluster.local:8500"},{"name":"CONSUL_HTTP_SSL_VERIFY","value":"false"}],"resources":{},"volumeMounts":[{"name":"conf","mountPath":"/mnt/conf.d"},{"name":"config-map","mountPath":"/mnt/config-map"},{"name":"scripts","mountPath":"/mnt/scripts"},{"name":"default-token-gwws6","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"},{"name":"init-mysql","image":"consul:1.3.1","command":["/bin/sh"],"args":["-c","set -ex\n# Copy all cnf files\ncp -f /mnt/config-map/* /mnt/conf.d/\n\n# Copy server-id.conf adding offset to avoid reserved server-id=0 value.\ncat /mnt/config-map/server-id.cnf | sed s/@@SERVER_ID@@/1/g \u003e /mnt/conf.d/server-id.cnf\n\n# TODO: Determine master/slave. Will remove slave for now\nrm /mnt/conf.d/slave.cnf\n\n# # Copy appropriate conf.d files from config-map to config mount.\n# if [[ $ordinal -eq 0 ]]; then\n#   cp -f /mnt/config-map/master.cnf /mnt/conf.d/\n# else\n#   cp -f /mnt/config-map/slave.cnf /mnt/conf.d/\n# fi\n#\n# # Copy replication user script\n# if [[ $ordinal -eq 0 ]]; then\n#   cp -f /mnt/config-map/create-replication-user.sh /mnt/scripts/create-replication-user.sh\n#   chmod 700 /mnt/scripts/create-replication-user.sh\n# fi\n\n# Set user to 999 (percona mysql user)\nchown -R 999:999 /mnt/conf.d /mnt/data\n"],"resources":{},"volumeMounts":[{"name":"conf","mountPath":"/mnt/conf.d"},{"name":"config-map","mountPath":"/mnt/config-map"},{"name":"scripts","mountPath":"/mnt/scripts"},{"name":"data","mountPath":"/mnt/data"},{"name":"default-token-gwws6","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"containers":[{"name":"mysql","image":"percona:5.7.25","ports":[{"name":"mysql","containerPort":3306,"protocol":"TCP"}],"env":[{"name":"MYSQL_DATABASE"},{"name":"MYSQL_ROOT_PASSWORD","valueFrom":{"secretKeyRef":{"name":"mysqlha","key":"mysql-root-password"}}},{"name":"MYSQL_REPLICATION_USER","value":"repl"},{"name":"MYSQL_REPLICATION_PASSWORD","valueFrom":{"secretKeyRef":{"name":"mysqlha","key":"mysql-replication-password"}}},{"name":"MYSQL_USER","value":"spoved"},{"name":"MYSQL_PASSWORD","valueFrom":{"secretKeyRef":{"name":"mysqlha","key":"mysql-password"}}}],"resources":{"requests":{"cpu":"100m","memory":"128Mi"}},"volumeMounts":[{"name":"data","mountPath":"/var/lib/mysql"},{"name":"conf","mountPath":"/etc/my.cnf.d"},{"name":"scripts","mountPath":"/mnt/scripts"},{"name":"default-token-gwws6","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/bin/sh","-c","mysqladmin ping -h 127.0.0.1 -u root -p\"${MYSQL_ROOT_PASSWORD}\""]},"initialDelaySeconds":30,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"exec":{"command":["/bin/sh","-c","mysql -h 127.0.0.1 -u root -p\"${MYSQL_ROOT_PASSWORD}\" -e \"SELECT 1\""]},"initialDelaySeconds":10,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"172.16.30.192","securityContext":{},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute"},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute"},{"key":"node.kubernetes.io/disk-pressure","operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/memory-pressure","operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/unschedulable","operator":"Exists","effect":"NoSchedule"}],"priority":0},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-04-10T13:04:38Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-04-10T13:04:59Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":null},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-04-10T13:04:29Z"}],"hostIP":"172.16.30.192","podIP":"10.42.0.47","startTime":"2019-04-10T13:04:29Z","initContainerStatuses":[{"name":"consul-registry","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2019-04-10T13:04:31Z","finishedAt":"2019-04-10T13:04:36Z","containerID":"docker://80275126e45ddc65e9a21f020e90c74e57e3787181d4cb773a016e7e2cb5d15c"}},"lastState":{},"ready":true,"restartCount":0,"image":"consul:1.3.1","imageID":"docker-pullable://consul@sha256:a633ef291439c1d86bf822cfa208f4b6484dfd8518189ed8b4a0b59c4ba96903","containerID":"docker://80275126e45ddc65e9a21f020e90c74e57e3787181d4cb773a016e7e2cb5d15c"},{"name":"init-mysql","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2019-04-10T13:04:37Z","finishedAt":"2019-04-10T13:04:38Z","containerID":"docker://05745353944dfc0c3a49bf673ec8a35b0e4aeea2caa65d4a28082088bad91966"}},"lastState":{},"ready":true,"restartCount":0,"image":"consul:1.3.1","imageID":"docker-pullable://consul@sha256:a633ef291439c1d86bf822cfa208f4b6484dfd8518189ed8b4a0b59c4ba96903","containerID":"docker://05745353944dfc0c3a49bf673ec8a35b0e4aeea2caa65d4a28082088bad91966"}],"containerStatuses":[{"name":"mysql","state":{"running":{"startedAt":"2019-04-10T13:04:38Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"percona:5.7.25","imageID":"docker-pullable://percona@sha256:3a5b2e2f52b444ac4449e469b957348a8953b5b372bd15e1c740eb5e8c01177b","containerID":"docker://aa88fe4892c0f745f5f5a59280edb952d82b9073a0e02f21b20e1fc36f7b1063"}],"qosClass":"Burstable"}}]}

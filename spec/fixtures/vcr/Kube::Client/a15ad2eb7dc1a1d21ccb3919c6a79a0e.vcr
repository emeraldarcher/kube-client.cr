HTTP/1.1 200 OK
Content-Type: application/json
Date: Sat, 13 Apr 2019 01:26:56 GMT
Connection: close
Transfer-Encoding: chunked
Content-Length: 9249

{"kind":"Pod","apiVersion":"v1","metadata":{"name":"mysqlha-htvtb","generateName":"mysqlha-","namespace":"default","selfLink":"/api/v1/namespaces/default/pods/mysqlha-htvtb","uid":"10f8c918-5d89-11e9-bf08-00505683ad44","resourceVersion":"882966","creationTimestamp":"2019-04-13T01:11:28Z","labels":{"app":"mysqlha","app.kubernetes.io/component":"database","app.kubernetes.io/instance":"mysqlha","app.kubernetes.io/managed-by":"Tiller","app.kubernetes.io/name":"mysqlha","app.kubernetes.io/part-of":"optanix-platform","app.kubernetes.io/version":"5.7.25","chart":"mysqlha-0.1.0","component":"server","controller-revision-hash":"2794143518","helm.sh/chart":"mysqlha-0.1.0","heritage":"Tiller","pod-template-generation":"1","release":"mysqlha","test":"test"},"annotations":{"cni.projectcalico.org/podIP":"10.42.2.159/32"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"DaemonSet","name":"mysqlha","uid":"c4c78e1e-5d82-11e9-afcc-005056831f87","controller":true,"blockOwnerDeletion":true}]},"spec":{"volumes":[{"name":"data","hostPath":{"path":"/var/lib/mysql","type":""}},{"name":"conf","hostPath":{"path":"/etc/mysql/conf.d","type":""}},{"name":"config-map","configMap":{"name":"mysqlha","defaultMode":420}},{"name":"scripts","configMap":{"name":"mysqlha-scripts","defaultMode":420}},{"name":"default-token-gwws6","secret":{"secretName":"default-token-gwws6","defaultMode":420}}],"initContainers":[{"name":"role-check","image":"consul:1.3.1","command":["/bin/sh"],"args":["/mnt/scripts/master_check.sh"],"env":[{"name":"CONSUL_DC","value":"optx"},{"name":"CONSUL_HTTP_ADDR","value":"consul-server.default.svc.cluster.local:8500"},{"name":"CONSUL_HTTP_SSL_VERIFY","value":"false"}],"resources":{},"volumeMounts":[{"name":"conf","mountPath":"/mnt/conf.d"},{"name":"config-map","mountPath":"/mnt/config-map"},{"name":"scripts","mountPath":"/mnt/scripts"},{"name":"default-token-gwws6","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"},{"name":"clone-mysql","image":"gcr.io/google-samples/xtrabackup:1.0","command":["/bin/bash"],"args":["/mnt/scripts/clone_mysql.sh"],"env":[{"name":"MYSQL_REPLICATION_USER","value":"repl"},{"name":"MYSQL_REPLICATION_PASSWORD","valueFrom":{"secretKeyRef":{"name":"mysqlha","key":"mysql-replication-password"}}}],"resources":{},"volumeMounts":[{"name":"data","mountPath":"/var/lib/mysql"},{"name":"conf","mountPath":"/etc/mysql/conf.d"},{"name":"scripts","mountPath":"/mnt/scripts"},{"name":"default-token-gwws6","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"},{"name":"init-mysql","image":"consul:1.3.1","command":["/bin/sh"],"args":["/mnt/scripts/mysql_init.sh"],"resources":{},"volumeMounts":[{"name":"conf","mountPath":"/mnt/conf.d"},{"name":"config-map","mountPath":"/mnt/config-map"},{"name":"scripts","mountPath":"/mnt/scripts"},{"name":"data","mountPath":"/mnt/data"},{"name":"default-token-gwws6","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"containers":[{"name":"mysql","image":"percona:5.7.25","ports":[{"name":"mysql","containerPort":3306,"protocol":"TCP"}],"env":[{"name":"MYSQL_DATABASE"},{"name":"MYSQL_ROOT_PASSWORD","valueFrom":{"secretKeyRef":{"name":"mysqlha","key":"mysql-root-password"}}},{"name":"MYSQL_REPLICATION_USER","value":"repl"},{"name":"MYSQL_REPLICATION_PASSWORD","valueFrom":{"secretKeyRef":{"name":"mysqlha","key":"mysql-replication-password"}}},{"name":"MYSQL_USER","value":"optanix"},{"name":"MYSQL_PASSWORD","valueFrom":{"secretKeyRef":{"name":"mysqlha","key":"mysql-password"}}}],"resources":{"requests":{"cpu":"100m","memory":"128Mi"}},"volumeMounts":[{"name":"data","mountPath":"/var/lib/mysql"},{"name":"conf","mountPath":"/etc/my.cnf.d"},{"name":"scripts","mountPath":"/mnt/scripts"},{"name":"default-token-gwws6","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"exec":{"command":["/bin/sh","-c","mysqladmin ping -h 127.0.0.1 -u root -p${MYSQL_ROOT_PASSWORD}"]},"initialDelaySeconds":30,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"exec":{"command":["/bin/sh","-c","MYSQL_PWD=\"${MYSQL_ROOT_PASSWORD}\"","mysql -h 127.0.0.1 -u root -e \"SELECT 1\""]},"initialDelaySeconds":10,"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"},{"name":"xtrabackup","image":"gcr.io/google-samples/xtrabackup:1.0","command":["/bin/bash"],"args":["/mnt/scripts/xtrabackup.sh"],"ports":[{"name":"xtrabackup","containerPort":3307,"protocol":"TCP"}],"env":[{"name":"MYSQL_PWD","valueFrom":{"secretKeyRef":{"name":"mysqlha","key":"mysql-root-password"}}},{"name":"MYSQL_REPLICATION_USER","value":"repl"},{"name":"MYSQL_REPLICATION_PASSWORD","valueFrom":{"secretKeyRef":{"name":"mysqlha","key":"mysql-replication-password"}}}],"resources":{},"volumeMounts":[{"name":"data","mountPath":"/var/lib/mysql"},{"name":"conf","mountPath":"/etc/mysql/conf.d"},{"name":"scripts","mountPath":"/mnt/scripts"},{"name":"default-token-gwws6","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"172.16.30.195","securityContext":{},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute"},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute"},{"key":"node.kubernetes.io/disk-pressure","operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/memory-pressure","operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/unschedulable","operator":"Exists","effect":"NoSchedule"}],"priority":0},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-04-13T01:11:38Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-04-13T01:11:55Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":null},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-04-13T01:11:28Z"}],"hostIP":"172.16.30.195","podIP":"10.42.2.159","startTime":"2019-04-13T01:11:28Z","initContainerStatuses":[{"name":"role-check","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2019-04-13T01:11:29Z","finishedAt":"2019-04-13T01:11:29Z","containerID":"docker://c0d0f2180fb20d6517da6f8143ffc26c70d5bad2a540e739da2c1980892ac833"}},"lastState":{},"ready":true,"restartCount":0,"image":"consul:1.3.1","imageID":"docker-pullable://consul@sha256:a633ef291439c1d86bf822cfa208f4b6484dfd8518189ed8b4a0b59c4ba96903","containerID":"docker://c0d0f2180fb20d6517da6f8143ffc26c70d5bad2a540e739da2c1980892ac833"},{"name":"clone-mysql","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2019-04-13T01:11:30Z","finishedAt":"2019-04-13T01:11:36Z","containerID":"docker://23b4630daea0611f74f6247891bff237f7f8feed838a8a210b0f3345663ad97d"}},"lastState":{},"ready":true,"restartCount":0,"image":"gcr.io/google-samples/xtrabackup:1.0","imageID":"docker-pullable://gcr.io/google-samples/xtrabackup@sha256:29354f70c9d9207e757a1bae6a4cbf2f57a56b18fe5c2b0acc1198a053b24b38","containerID":"docker://23b4630daea0611f74f6247891bff237f7f8feed838a8a210b0f3345663ad97d"},{"name":"init-mysql","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2019-04-13T01:11:37Z","finishedAt":"2019-04-13T01:11:37Z","containerID":"docker://300225a271ad1d0ac76dc15ae699e83b7f80594e181db829ceb5d3365228867d"}},"lastState":{},"ready":true,"restartCount":0,"image":"consul:1.3.1","imageID":"docker-pullable://consul@sha256:a633ef291439c1d86bf822cfa208f4b6484dfd8518189ed8b4a0b59c4ba96903","containerID":"docker://300225a271ad1d0ac76dc15ae699e83b7f80594e181db829ceb5d3365228867d"}],"containerStatuses":[{"name":"mysql","state":{"running":{"startedAt":"2019-04-13T01:11:38Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"percona:5.7.25","imageID":"docker-pullable://percona@sha256:3a5b2e2f52b444ac4449e469b957348a8953b5b372bd15e1c740eb5e8c01177b","containerID":"docker://60b04263c2a10b532b16584c07e5b0115dcfbc1ae1a44b1055783505e3e4707a"},{"name":"xtrabackup","state":{"running":{"startedAt":"2019-04-13T01:11:38Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"gcr.io/google-samples/xtrabackup:1.0","imageID":"docker-pullable://gcr.io/google-samples/xtrabackup@sha256:29354f70c9d9207e757a1bae6a4cbf2f57a56b18fe5c2b0acc1198a053b24b38","containerID":"docker://65a512930c7839199413b31504a49a35e06a232bf21d131de36e0c219771166e"}],"qosClass":"Burstable"}}
